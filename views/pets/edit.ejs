<% layout("/layouts/boilerplate") %>

<!-- Background with Animated Elements -->
<section class="min-h-screen bg-gradient-to-br from-emerald-50 to-white py-16 px-4 relative overflow-hidden">
  <!-- Floating Background Decorations -->
  <div class="absolute inset-0 pointer-events-none">
    <div class="absolute top-20 left-10 w-32 h-32 bg-emerald-200/20 rounded-full blur-2xl animate-pulse"></div>
    <div class="absolute bottom-32 right-20 w-40 h-40 bg-emerald-300/15 rounded-full blur-3xl animate-pulse delay-1000"></div>
    <div class="absolute top-1/2 left-1/4 w-24 h-24 bg-emerald-100/30 rounded-full blur-xl animate-bounce delay-500"></div>
  </div>

  <!-- Main Form Container -->
  <div class="max-w-2xl mx-auto relative">
    <!-- Animated Card with Glow Effect -->
    <div class="group bg-white rounded-3xl shadow-2xl border border-emerald-100 overflow-hidden transform transition-all duration-700 hover:shadow-3xl hover:-translate-y-1 hover:scale-[1.02] relative">
      <!-- Card Glow Effect -->
      <div class="absolute -inset-2 rounded-3xl pointer-events-none opacity-0 group-hover:opacity-100 bg-gradient-to-br from-emerald-200/30 via-white/20 to-emerald-100/30 blur-xl transition-all duration-700"></div>
      
      <div class="relative p-8 md:p-12">
        <!-- Animated Header -->
        <div class="text-center mb-10 opacity-0 animate-fade-in-up">
          <h3 class="text-4xl font-extrabold text-emerald-800 mb-2 tracking-tight">Edit Your Listing</h3>
          <div class="w-24 h-1 bg-emerald-600 mx-auto rounded-full transform scale-x-0 animate-scale-x animation-delay-300"></div>
          <p class="text-emerald-600 mt-4 opacity-0 animate-fade-in-up animation-delay-600">Update your pet's information</p>
        </div>

        <form method="POST" action="/pets/<%= pet._id %>?_method=PUT" novalidate class="space-y-8">
          <!-- Name Field -->
          <div class="group/field opacity-0 animate-fade-in-up animation-delay-900">
            <label for="pet[name]" class="block text-base font-bold text-emerald-700 mb-3 transform transition-all duration-300 group-hover/field:text-emerald-600">
              <span class="flex items-center gap-2">
                <span class="opacity-70 group-hover/field:opacity-100 transition-opacity">üêæ</span>
                Pet Name
              </span>
            </label>
            <input
              name="pet[name]"
              value="<%= pet.name %>"
              required
              class="w-full px-6 py-4 bg-emerald-50 border border-emerald-200 rounded-2xl focus:ring-2 focus:ring-emerald-400 focus:border-emerald-400 focus:outline-none transition-all duration-300 hover:bg-emerald-100 hover:border-emerald-300 transform hover:scale-[1.01]"
            />
          </div>

          <!-- Description Field -->
          <div class="group/field opacity-0 animate-fade-in-up animation-delay-1200">
            <label for="pet[description]" class="block text-base font-bold text-emerald-700 mb-3 transform transition-all duration-300 group-hover/field:text-emerald-600">
              <span class="flex items-center gap-2">
                <span class="opacity-70 group-hover/field:opacity-100 transition-opacity">üìù</span>
                Description
              </span>
            </label>
            <textarea
              name="pet[description]"
              rows="4"
              required
              class="w-full px-6 py-4 bg-emerald-50 border border-emerald-200 rounded-2xl focus:ring-2 focus:ring-emerald-400 focus:border-emerald-400 focus:outline-none transition-all duration-300 hover:bg-emerald-100 hover:border-emerald-300 transform hover:scale-[1.01] resize-none"
            ><%= pet.description %></textarea>
          </div>

          <!-- Image Field with Preview -->
          <div class="group/field opacity-0 animate-fade-in-up animation-delay-1500">
            <label for="pet[image]" class="block text-base font-bold text-emerald-700 mb-3 transform transition-all duration-300 group-hover/field:text-emerald-600">
              <span class="flex items-center gap-2">
                <span class="opacity-70 group-hover/field:opacity-100 transition-opacity">üì∏</span>
                Pet Photo
              </span>
            </label>
            <div class="flex gap-6 items-center">
              <!-- Image Preview with Hover Effect -->
              <div class="relative group/img">
                <img 
                  src="<%= pet.image %>" 
                  alt="<%= pet.name %>" 
                  class="w-32 h-32 object-cover rounded-2xl border-2 border-emerald-200 shadow-lg transition-all duration-500 group-hover/img:scale-110 group-hover/img:shadow-xl group-hover/img:border-emerald-300" 
                />
                <div class="absolute inset-0 bg-black/20 opacity-0 group-hover/img:opacity-100 transition-opacity duration-300 rounded-2xl flex items-center justify-center">
                  <span class="text-white text-sm font-medium">Preview</span>
                </div>
              </div>
              
              <!-- Image URL Input -->
              <input
                type="text"
                name="pet[image]"
                placeholder="Enter new image URL"
                class="flex-1 px-6 py-4 bg-emerald-50 border border-emerald-200 rounded-2xl focus:ring-2 focus:ring-emerald-400 focus:border-emerald-400 focus:outline-none transition-all duration-300 hover:bg-emerald-100 hover:border-emerald-300 transform hover:scale-[1.01]"
              />
            </div>
          </div>

          <!-- Price Field -->
          <div class="group/field opacity-0 animate-fade-in-up animation-delay-1800">
            <label for="pet[price]" class="block text-base font-bold text-emerald-700 mb-3 transform transition-all duration-300 group-hover/field:text-emerald-600">
              <span class="flex items-center gap-2">
                <span class="opacity-70 group-hover/field:opacity-100 transition-opacity">üí∞</span>
                Price
              </span>
            </label>
            <input
              name="pet[price]"
              value="<%= pet.price %>"
              required
              class="w-full px-6 py-4 bg-emerald-50 border border-emerald-200 rounded-2xl focus:ring-2 focus:ring-emerald-400 focus:border-emerald-400 focus:outline-none transition-all duration-300 hover:bg-emerald-100 hover:border-emerald-300 transform hover:scale-[1.01]"
            />
          </div>

          <!-- Submit Button with Advanced Animation -->
          <div class="pt-6 opacity-0 animate-fade-in-up animation-delay-2100">
            <button
              type="submit"
              class="group/btn relative w-full md:w-auto px-10 py-4 bg-emerald-700 text-white rounded-full shadow-xl font-bold tracking-wide transition-all duration-500 transform hover:scale-110 hover:-translate-y-1 hover:shadow-2xl mx-auto block overflow-hidden focus:ring-4 focus:ring-emerald-300"
            >
              <span class="absolute inset-0 bg-gradient-to-r from-emerald-600 to-emerald-500 opacity-0 group-hover/btn:opacity-100 transition-opacity duration-500"></span>
              <span class="relative z-10 flex items-center justify-center gap-3">
                <span class="transform group-hover/btn:rotate-12 group-hover/btn:scale-125 transition-transform duration-300">üíæ</span>
                Save Changes
                <span class="transform group-hover/btn:translate-x-1 transition-transform duration-300">‚Üí</span>
              </span>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>

<!-- Custom CSS for Advanced Animations -->
<style>
  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes scale-x {
    from {
      transform: scaleX(0);
    }
    to {
      transform: scaleX(1);
    }
  }
  
  .animate-fade-in-up {
    animation: fade-in-up 0.8s ease-out forwards;
  }
  
  .animate-scale-x {
    animation: scale-x 0.6s ease-out forwards;
  }
  
  .animation-delay-300 {
    animation-delay: 0.3s;
  }
  
  .animation-delay-600 {
    animation-delay: 0.6s;
  }
  
  .animation-delay-900 {
    animation-delay: 0.9s;
  }
  
  .animation-delay-1200 {
    animation-delay: 1.2s;
  }
  
  .animation-delay-1500 {
    animation-delay: 1.5s;
  }
  
  .animation-delay-1800 {
    animation-delay: 1.8s;
  }
  
  .animation-delay-2100 {
    animation-delay: 2.1s;
  }
  
  .hover\:shadow-3xl:hover {
    box-shadow: 0 35px 60px -12px rgba(0, 0, 0, 0.25);
  }
  
  /* Smooth focus transitions */
  input:focus, textarea:focus {
    transform: scale(1.02);
  }
</style>
